<div id="page-header" class="bg-gradient bg-shadow">
    <div class="container">
        <div class="header-text clearfix">
            <div id="topcab"></div>
            <h3 class="pull-left mb-0"  *ngIf="documento">
                <span class="far fa-folder-open text-default menu-item-icon text-center fa-fw"></span> 
                <span [innerHTML]="documento.title"></span>
            </h3>
        </div>
    </div>
</div>

<div class="content pb-4">
    <div class="container" *ngIf="documento">
                
        <h4 class="mt-4 mb-4 text-primary" [innerHTML]="documento.subTitle">
            <!-- {{ documento.subTitle }} -->
        </h4>

        <div 
            *ngIf="documento.description == 'cedula-policial' ||
            documento.description == 'ips-asegurado' ||
            documento.description == 'ips-salario' ||
            documento.description == 'inscripcion-empleado' ||
            documento.description == 'funcionario-publico' ||
            documento.description == 'ruc-set' ||
            documento.description == 'mipymes'">
            <div class="col-lg-6 col-md-12 col-xs-12">
                <form #miForm="ngForm" class="mt-2">
                    
                    <div class="form-group">
                        <label for="cedula"><strong> <i class="fa fa-info-circle"></i> Cédula </strong> <small>(sin puntos)</small></label>
                        <input type="text" [(ngModel)]="cedula" class="form-control" style="max-width: 200px;" id="cedula" name="cedula" placeholder="Ej. 123456" required>
                    </div>

                    <div class="form-group" *ngIf="documento.description == 'ruc-set'">
                        <label for="dv"><strong> <i class="fa fa-info-circle"></i> Dígito Verificador </strong> <small>(sin puntos)</small></label>
                        <input type="number" [(ngModel)]="dv" class="form-control" style="max-width: 200px;" id="dv" name="dv" placeholder="Ej. 5" required>
                    </div>

                    <div class="form-group" *ngIf="documento.description == 'cedula-policial'">
                        <label for="fechaNac"><strong> <i class="fa fa-info-circle"></i> Fecha de Nacimiento </strong> <small>(Ej. 01/01/1940)</small></label>
                        <input type="date" [(ngModel)]="fechaNac" class="form-control" style="max-width: 200px;" id="fechaNac" name="fechaNac" placeholder="Ej. 01-01-1940" required>
                    </div>
                    
                    <re-captcha (resolved)="resolved($event)" siteKey="6Les3CAUAAAAAHePnS6Tnw0shRj6XWERG0WScS9s" [(ngModel)]="captcha" name="captcha" #captchaControl="ngModel" required></re-captcha>
                    
                    <button class="btn btn-sm btn-default" (click)="refreshCaptcha()">
                        Recargar captcha
                    </button>

                    <div class="clearfix"><br/></div>

                    <div class="text-center" *ngIf="loading">
                        <img src="assets/img/misc/icon_loading.gif" alt="Procesando.." /> Procesando...
                    </div>

                    <div class="clearfix"><br/></div>
                    <button (click)="getRptDocumentSinIE(null)"  class="btn btn-primary" style="margin:10px;" [disabled]="!miForm.form.valid || loading">
                        <span class="fa fa-check"></span> Aceptar                        
                    </button>                    
                    <button type="button" class="btn btn-default" style="margin:10px;" (click)="atras()">
                        <i class="fa fa-angle-double-left"></i> Atrás
                    </button>

                </form>
            </div>
        </div>

        <div *ngIf="documento.description == 'snpp'">
            <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                    <form #miForm="ngForm" class="mt-2">
                        <div class="form-group">
                            <label for="cedula"><strong> <i class="fa fa-info-circle"></i> Cédula </strong> <small>sin puntos</small></label>
                            <input type="text" [(ngModel)]="cedula" class="form-control" style="max-width: 200px;" id="cedula" name="cedula" placeholder="Ej. 123456" required>
                        </div>
                        <div class="form-group">
                            <label for="codAlumno"><strong> <i class="fa fa-info-circle"></i> Cod. Alumno </strong> <small>(6 dígitos)</small></label>
                            <input type="text" [(ngModel)]="codAlumno" class="form-control" style="max-width: 200px;" id="codAlumno" name="codAlumno" placeholder="Ej. a1a1a1" required>
                        </div>

                        <re-captcha (resolved)="resolved($event)" siteKey="6Les3CAUAAAAAHePnS6Tnw0shRj6XWERG0WScS9s" [(ngModel)]="captcha" name="captcha" #captchaControl="ngModel" required></re-captcha>

                        <button class="btn btn-sm btn-default" (click)="refreshCaptcha()"> <!-- *ngIf="captcha"-->
                            Recargar captcha
                        </button>

                        <div class="clearfix"><br/></div>
                        <div class="text-center" *ngIf="loading">
                            <img src="assets/img/misc/icon_loading.gif" alt="Procesando.." /> Procesando...
                        </div>
                        
                        <div class="clearfix"><br/></div>                        
                        <button (click)="getCursosSnpp()" class="btn btn-primary" style="margin:10px;" [disabled]="!miForm.form.valid || loading">
                            <span class="fa fa-check"></span> Aceptar                            
                        </button>
                        <button type="button" class="btn btn-default" style="margin:10px;" (click)="atras()">
                            <i class="fa fa-angle-double-left"></i> Atrás
                        </button>
                    </form>
                </div>

                <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12">
                    <div class="mt-3">
                        <img width="100%" style="border-radius: 16px;" src="assets/img/certtificados-entregados-en-el-SNPP.png" />
                    </div>
                    <div class="mt-2">
                        <div class="alert" style="margin-top:15px;background-color:#e2e6e8;color:#31708f;">
                            <strong><i class="fa fa-info-circle"></i></strong>  Para descargar el certificado, el SNPP entregará a cada alumno un código de descarga.
                        </div>
                    </div>
                </div>
            </div>
        </div>
                
    </div>
</div>

<div class="modal fade" id="modalView" tabindex="-1" role="dialog" aria-labelledby="modalView" aria-hidden="true">
    <div style="max-width:800px;" class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content p-4">

            <div class="modal-header">
                <h3 class="modal-title">
                    Lista de Certificados - SNPP
                </h3>

                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body row">
                <div class="col-lg-12 col-md-12 col-xs-12" style="padding:10px;" *ngFor="let curso of cursos?.data">
                    <ul class="list-group">
                        <a class="list-group-item list-group-item-action flex-column align-items-start" (click)="getCertificadoSnpp(cursos.key, curso)" style="cursor: pointer;">
                            <div class="d-flex w-100 justify-content-between">
                                <h5 class="mb-1">{{curso.especialidad}}</h5>
                                <small>{{curso.fecha_fin}}</small>
                            </div>
                        </a>
                    </ul>
                </div>
                <div class="clearfix"></div>
                <div class="text-center" *ngIf="loading">
                    <img src="assets/img/misc/icon_loading.gif" alt="Cargando.." /> Procesando solicitud...
                </div>
                <div class="alert alert-danger" *ngIf="!resultado.status">
                    <i class="fa fa-info-circle"></i> {{resultado.message}} 
                </div>
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>
